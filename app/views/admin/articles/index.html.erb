<div class="admin-articles-wrap">
  <div class="items">
    <% @articles.each do |article| %>
      <div class="item" id='js-article-<%= article.id %>'>
        <div class="text">
          <a href="#" class="username">心有猛虎，细嗅蔷薇</a>
          <span class="date"><%= article.created_at.strftime('%Y-%m-%d') %></span>
          <a href="/admin/articles/<%= article.id %>/edit" class='article-edit'><i class="fa fa-pencil"></i></a>
          <a href="javascript:void(0)" class='article-remove js-remove' data-id='<%= article.id %>'><i class="fa fa-remove"></i></a>
          <%= link_to article.title, article_path(article), class: 'article-title' %>
          <p class="operation">
            <a href="#" class="fa fa-thumbs-o-up">366</a>
            <a href="#" class="fa fa-star-o">366</a>
            <a href="#" class="fa fa-twitch ">18</a>
          </p>
        </div>
        <div class="img">
          <%= article.content[/\<img(.*?)\>/].try(:html_safe) %>
        </div>
      </div>
    <% end %>
  </div>
</div>
<script type="text/javascript">
  $(function() {
    $(document).on('click', '.js-remove', removeArticle);
  });

  function removeArticle() {
    var self = $(this);
    swal({
     title: "您确定要删除吗？",
     type: "warning",
     showCancelButton: true,
     closeOnConfirm: false,
     confirmButtonText: "是的，强行删除",
     confirmButtonColor: "#ec6c62"
     }, function() {
       $.ajax({
         url: "/ajax/articles/"+ self.data('id'),
         type: "DELETE",
         dataType: 'script',
         success: function(){}
       })
     });
  }
</script>
