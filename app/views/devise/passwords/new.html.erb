<div class="login-page">
  <div class="tips">
    <% flash.each do |name, msg| %>
      <%= content_tag :div, msg, class: "#{name.to_s}" %>
    <% end %>
  </div>
  <div class="panel">
    <a href="javascript:void(0)" class="panel-item">重置密码</a>
  </div>
  <%= form_tag user_password_path, class: 'login-form' do %>
    <div class="form-item notice">
      <%= text_field_tag :email, nil, placeholder: '填写要重置密码的邮箱!', class: 'js-email width-260', required: true %>
    </div>
    <div class="form-items">
      <div class="form-item float-left">
        <%= rucaptcha_input_tag(class: 'width-125', placeholder: '验证码') %>
      </div>
      <div class="form-item float-right">
        <%= rucaptcha_image_tag(alt: 'Captcha', class: 'captcha') %>
      </div>
    </div>
    <div class="form-item">
      <%= submit_tag '发送邮件', class: 'btn btn-login width-260' %>
    </div>
  <% end %>
</div>
<script type="text/javascript">
  $(function() {
    $(document).on('click', '.captcha', reload_captcha)
  });

  function reload_captcha() {
    img = $(this).find('img');
    img.context.src += '?' + (new Date()).getTime();
  }
</script>
